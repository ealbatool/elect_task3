const int buttonPin = 2;      // Button input
const int controlPin = 3;     // MOSFET control
bool powerState = false;      // Tracks ON/OFF state
unsigned long powerOnTime;    // Tracks when turned ON
const unsigned long autoOffTime = 10000; // 10s timeout

void setup() {
  pinMode(buttonPin, INPUT);
  pinMode(controlPin, OUTPUT);
  digitalWrite(controlPin, LOW); // Start OFF
}

void loop() {
  // Toggle state on button press
  if (digitalRead(buttonPin) {
    delay(50); // Debounce
    if (digitalRead(buttonPin)) {
      powerState = !powerState;
      digitalWrite(controlPin, powerState ? HIGH : LOW);
      if (powerState) powerOnTime = millis(); // Reset timer
    }
  }

  // Auto-off after timeout
  if (powerState && (millis() - powerOnTime > autoOffTime)) {
    powerState = false;
    digitalWrite(controlPin, LOW);
  }
}
